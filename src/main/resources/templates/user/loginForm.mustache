{{> /layout/header}}

<!-- 컨테이너 시작 -->
<div class="container mt-3">

    <!-- 로그인 폼 시작 -->
    <form>
        <div class="mb-3 mt-3">
            <input id="username" type="text" class="form-control" placeholder="Enter username" required maxlength="12">
        </div>
        <div class="mb-3">
            <input id="password" type="password" class="form-control" placeholder="Enter password" required maxlength="20">
        </div>
        <div class="form-check mb-3">
            <label class="form-check-label">
                <input class="form-check-input" type="checkbox"> Remember me
            </label>
        </div>
        <button id="btn-login" type="button" class="btn btn-success">로그인</button>
    </form>
    <!-- 로그인 폼 끝 -->

</div>
<!-- 컨테이너 끝 -->

<script>

$("#btn-login").click(()=>{
    login();
});

async function login(){
  let loginDto = {
            username: $("#username").val(),
            password: $("#password").val(),
               }

        let response = await fetch("/api/login",{
            method: "POST",
            body: JSON.stringify(loginDto), 
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            }
        });

        let responseParse = await response.json();

         if (responseParse.code == 1) {
            alert("로그인에 성공하였습니다.");
            location.href = "/";
        } else {
            alert("로그인에 실패하였습니다");
        }
    } 
</script>

{{> /layout/footer}}